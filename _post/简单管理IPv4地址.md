---
日期: 2024年12月4日
---

> 现代网络，少了IP地址就没法连接网络，IP本质就是网络，因为它运行在网络层，承载着人类的联网数据。管理IP地址最重要最基础的就是IP地址划分计算。

# IP地址划分计算

IP地址划分涉及最重要的两个技术CIDR(无类域间路由)以及VLSM(可变长子网掩码划分)，以下是通过这两个技术，分别划分地址

- 案例1：计算可用网络地址
 CIDR格式IP:192.168.0.0/25
 CIDR格式网络块：2的(32-25)次方=128，可容纳128个地址
 VLSM格式IP：192.168.0.0 255.255.255.128
 VLSM格式网络块：256-128=128，可容纳128个地址
 可用地址范围：192.168.0.1-192.168.0.127
 因为192.168.0.127是广播地址，所以，192.168.0.0/25网络可以容纳126台主机
 
- 案例2：仅有13台主机，如何将192.168.0.0/24进行子网的划分
 2的4次方=16台，正好满足最小容量的划分，此时主机部分为4，网络部分为32-4=28，
 CIDR格式IP:192.168.0.0/28
 CIDR格式网络块：2的(32-28)次方=16，可容纳16个地址
 VLSM格式IP：192.168.0.0 255.255.255.240
 VLSM格式网络块：256-240=16，可容纳16个地址
 可用地址范围：192.168.0.1-192.168.0.14
 所以，仅有13台主机，可以将192.168.0.0/24继续划分为192.168.0.0/28
 
> 注意: 在主机数量已知的条件下，计算可容纳的IP的地址，需要用2的N次方依次计算，此时N即为主机位，(32-N)即为网络位

# IP路由汇总

> 如果已经掌握了上述CIDR以及VLSM的内容这会非常简单

- 案例1：计算可用网络地址，需要对以下两个子网路由汇总
  子网 1: 192.168.16.0/24
  子网 2: 192.168.17.0/24
  先将子网地址转换为2进制表格：
 
 ```
+---------+-------------+---------------------------------------------+
| Decimal | IP Address  |     192  .    168   .    16   .     0       |      
+---------+-------------+---------------------------------------------+
| Binary  | IP Address  | 11000000 . 10101000 . 0001000|0 . 00000000  |
+---------+-------------+---------------------------------------------+
| Binary  | Subnet Mask | 11000000 . 10101000 . 0001000|1 . 00000000  |
+---------+-------------+---------------------------------------------+
| Decimal | IP Address  |     192  .    168   .     17   .     0      |      
+-----------------------+---------------------------------------------+
|         Bit           |  8 Bits  .  8 Bits  .  8 Bits  .  8 Bits    |
+-----------------------+---------------------------------------------+
|         Byte          |  1 Byte  .  1 Byte  .  1 Byte  .  1 Byte    |
+-----------------------+---------------------------------------------+
 ```
 找到公共前缀： 
 从左向右(高位到低位)，持续比较两个子网的2进制，直到首个不同的位来确定 **最长**的公共前缀，上述最长的公共前缀中有23位2进制是相同的  
 汇总路由的地址： 
 汇总路由的网络部分将是上述23 位，而剩余的 9 位用于子网划分。因此，CIDR 表示得到汇总路由为：`192.168.16.0/23`


# 通配符掩码
> 主要应用于OSFP路由协议以及一些网络控制ACL配置中

- 案例1：
  掩码：255.255.248.0
  转成通配符掩码: 0.0.7.255
用每个255减去对应的每一位，即得到通配符掩码

# 附录

IP地址分类：

- 私网地址分类(实际已被CIDR取代，用于私有网络，无法路由)
  A类：10.0.0.0 - 10.255.255.255
  B类：172.16.0.0 - 172.31.255.255  
  C类：192.168.0.0 - 192.168.255.255 
  
- 特殊私网地址(主要用于测试实验和文档，不用于生产)
  192.0.2.0/24：用于文档编写和网络测试
  192.18.0.0/15：用于测试不同子网间的网络连接
  198.51.100.0/24：用于文档编写和网络测试
  203.0.113.0/24：用于文档编写和网络测试
 
> 除私网地址及特殊私网地址以外均为公共网络地址
